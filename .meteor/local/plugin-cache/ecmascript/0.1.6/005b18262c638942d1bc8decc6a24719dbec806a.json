{"metadata":{"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}},"usedHelpers":[]},"ignored":false,"code":"if (Meteor.isClient) {\n    Meteor.startup(function () {\n        $(document).ready((function ($, window, undefined) {\n            var doc = document;\n            var PlanetX = function () {\n                // you can configure these variables using PlanetX.init() function\n                this.isIE = /MSIE/i.test(navigator.userAgent);\n                this.appkey = \"\";\n                // <form> tag id for OAuth 2.0 request\n                this.login_form = null;\n                this.client_id = \"\";\n                this.response_type = \"token\";\n                this.scope = \"\";\n                this.redirect_uri = \"\";\n                // saving token in cookie or localstorage\n                // default is true\n                this.savingToken = true;\n                // access token\n                this._access_token = \"\";\n                this._access_token_start = 14;\n                this._access_token_end = 50;\n                this._access_token_time = null;\n                this._access_token_time_limit = 43195;\n                // login status\n                this._loginStatus = false;\n                // check whether this web app (or web page) already has access token or not.\n                this._checkAccessToken();\n            };\n            // prototype\n            PlanetX.prototype = {\n                // System information\n                versionNumber: '1.1.0',\n                // Return code\n                SUCCESS_INIT: 100,\n                SUCCESS_LOGIN: 101,\n                SUCCESS_LOGOUT: 102,\n                SUCCESS_API: 200,\n                ERROR_INIT: -100,\n                ERROR_LOGIN: -101,\n                ERROR_LOGOUT: -102,\n                ERROR_PARAMETER_MISSING: -201,\n                /**\r\n                 * @function init\r\n                 */\n                init: function (obj) {\n\n                    var i,\n                        that = this,\n                        typeAttr,\n                        nameAttr,\n                        valueAttr,\n                        body = doc.getElementsByTagName(\"body\")[0];\n\n                    // first call\n                    if (this.login_form === null) {\n                        // initializing with object parameter\n                        if (!!obj) {\n                            for (i in babelHelpers.sanitizeForInObject(obj)) {\n                                this[i] = obj[i];\n                            }\n                        }\n                        // making new <form> tag\n                        this.login_form = doc.createElement(\"form\");\n                        this.login_form.action = \"https://oneid.skplanetx.com/oauth/authorize\";\n                        this.login_form.method = \"get\";\n                        // making <input> tags and their attributes in <form> tag\n                        jQuery.each([\"client_id\", \"response_type\", \"scope\", \"redirect_uri\"], function (i, name) {\n                            node = doc.createElement(\"input\");\n                            // making new attributes\n                            typeAttr = doc.createAttribute(\"type\");\n                            nameAttr = doc.createAttribute(\"name\");\n                            valueAttr = doc.createAttribute(\"value\");\n                            // setting attribute values\n                            typeAttr.value = \"hidden\";\n                            nameAttr.value = name;\n                            valueAttr.value = that[name];\n                            // attaching attributes to <input> tag\n                            node.setAttributeNode(typeAttr);\n                            node.setAttributeNode(nameAttr);\n                            node.setAttributeNode(valueAttr);\n                            // attaching <input> tag to <form> tag\n                            that.login_form.appendChild(node);\n                        });\n                        body.appendChild(this.login_form);\n                        return this.SUCCESS_INIT;\n                    }\n                    // can't call twice\n                    else {\n                            return this.ERROR_INIT;\n                        }\n                },\n                /**\r\n                 * @function login\r\n                 */\n                login: function () {\n                    // if existing <form> tag for log-in\n                    if (this.login_form !== null) {\n                        this.login_form.submit();\n                        return this.SUCCESS_LOGIN;\n                    } else {\n                        return this.ERROR_LOGIN;\n                    }\n                },\n                /**\r\n                 * @function logout\r\n                 */\n                logout: function (successCB, failCB) {\n\n                    if (this.getLoginStatus() === false) {\n                        return this.ERROR_LOGOUT;\n                    }\n\n                    // ajax JSONP call for invalidating access_token\n                    $.ajax({\n                        beforeSend: function (xhr) {\n                            xhr.setRequestHeader(\"appKey\", this._getAppkey());\n                        },\n                        type: \"get\",\n                        url: \"https://oneid.skplanetx.com/oauth/expireToken_jsonp\",\n                        data: {\n                            \"client_id\": this.client_id,\n                            \"token\": this._getAccessToken()\n                        },\n                        dataType: \"jsonp\",\n                        context: this,\n                        callback: \"this.logoutCallback\"\n                    }).done(function (data) {\n                        if (data.app.result === \"success\") {\n                            this._clearToken();\n                            this._loginStatus = false;\n                            window.location.hash = '';\n                            if (typeof successCB === 'function') {\n                                successCB();\n                            }\n                            return this.SUCCESS_LOGOUT;\n                        } else {\n                            alert('response for the logout-request is not success');\n                            return this.ERROR_LOGOUT;\n                        }\n                    }).fail(function (jqXHR, textStatus, errorThrown) {\n\n                        // error handling\n                        if (jqXHR.status === 0) {\n                            alert(\"error 0: Network Problem\");\n                        } else if (jqXHR.status === 401) {\n                            alert(\"error 401: Unauthorized\");\n                            location.href = \"https://developers.skplanetx.com/login/\";\n                        } else if (jqXHR.status === 403) {\n                            alert(\"error 403: Forbidden\");\n                        } else if (jqXHR.status === 404) {\n                            alert(\"error 404: Not Found\");\n                        } else if (jqXHR.status === 406) {\n                            alert(\"error 406: Not acceptable\");\n                        } else if (jqXHR.status === 412) {\n                            alert(\"error 412: Precondition Failed \");\n                        } else if (jqXHR.status === 500) {\n                            alert(\"error 500: Internal Server Error\");\n                        } else {\n                            alert(\"error \" + jqXHR.status);\n                        }\n                        if (typeof failCB === 'function') {\n                            failCB();\n                        }\n                        return this.ERROR_LOGOUT;\n                    });\n                },\n                /**\r\n                 * @function getLoginStatus\r\n                 */\n                getLoginStatus: function () {\n                    return this._loginStatus;\n                },\n                /**\r\n                 * @function logoutCallback\r\n                 */\n                logoutCallback: function (data) {\n                    // not yet in the server-side\n                },\n                /**\r\n                 * @function _setAppkey\r\n                 */\n                _setAppkey: function (appkey) {\n                    this.appkey = appkey;\n                },\n                /**\r\n                 * @function _getAppkey\r\n                 */\n                _getAppkey: function () {\n                    return this.appkey;\n                },\n                /**\r\n                 * @function _saveToken\r\n                 */\n                _saveToken: function (token) {\n                    // when you don't want to save token in cookie or localstorage\n                    // ex) one page application\n                    if (this.savingToken === false) {\n                        return;\n                    }\n\n                    var current_time = new Date();\n                    this._access_token_time = current_time.getTime() / 1000;\n                    // first check window.localStorage\n                    if (window.localStorage) {\n                        localStorage.setItem(\"token\", token);\n                        localStorage.setItem(\"tokentime\", this._access_token_time);\n                    }\n                    // second check cookie\n                    else {\n                            doc.cookie += \"token=\" + token + \";\";\n                            doc.cookie += \"tokentime=\" + this._access_token_time + \";\";\n                        }\n                },\n\n                /**\r\n                 * @function _loadToken\r\n                 */\n                _loadToken: function () {\n\n                    // when you don't want to save token in cookie or localstorage\n                    // ex) one page application\n                    if (this.savingToken === false) {\n                        return;\n                    }\n\n                    // first check window.localStorage\n                    if (window.localStorage) {\n                        this._access_token = localStorage.getItem(\"token\");\n                        this._access_token_time = localStorage.getItem(\"tokentime\");\n                    }\n                    // second check cookie\n                    else {\n                            var cookieArray = doc.cookie.split(\";\");\n                            for (var i in babelHelpers.sanitizeForInObject(cookieArray)) {\n                                if (cookieArray[i].match(\"token=\")) {\n                                    this._access_token = cookieArray[i].substr(cookieArray[i].indexOf(\"=\") + 1);\n                                } else if (cookieArray[i].match(\"tokentime=\")) {\n                                    this._access_token_time = cookieArray[i].substr(cookieArray[i].indexOf(\"=\") + 1);\n                                }\n                            }\n                        }\n\n                    // token validation check\n                    var current_date = new Date();\n                    current_time = current_date.getTime() / 1000;\n                    if (!this._access_token || !this._access_token_time || this._access_token_time_limit - (current_time - this._access_token_time) < 0) {\n                        this._clearToken();\n                        this._loginStatus = false;\n                    } else if (!!this._access_token && !!this._access_token_time) {\n                        this._loginStatus = true;\n                    }\n                },\n                /**\r\n                 * @function _clearToken\r\n                 */\n                _clearToken: function () {\n                    this._access_token = \"\";\n                    this._access_token_time = \"\";\n\n                    // when you don't want to save token in cookie or localstorage\n                    // ex) one page application\n                    if (this.savingToken === false) {\n                        return;\n                    }\n\n                    // first remove window.localStorage\n                    if (window.localStorage) {\n                        localStorage.removeItem(\"token\");\n                        localStorage.removeItem(\"tokentime\");\n                    }\n                    // second check cookie\n                    else {\n                            this._saveToken(\"\");\n                        }\n                },\n                /**\r\n                 * @function _checkAccessToken\r\n                 */\n                _checkAccessToken: function () {\n                    // get access token from local storage or cookie\n                    this._loadToken();\n                    // get access token from location.hash , this value has higher priority.\n                    if (window.location.hash) {\n                        var hashString = window.location.hash.substring(1),\n                            pattern = /^access_token/,\n                            result = hashString.match(pattern);\n                        if (result !== null) {\n                            this._access_token = window.location.hash.slice(this._access_token_start, this._access_token_end);\n                            this._saveToken(this._access_token);\n                            this._loginStatus = true;\n                        }\n                    }\n                },\n                /**\r\n                 * @function _getAccessToken\r\n                 */\n                _getAccessToken: function () {\n                    return this._access_token;\n                },\n                /**\r\n                 * @function api\r\n                 */\n                api: function (queryMethod, queryURL, queryAccept, queryData, successCallback, failCallback, userSetting) {\n                    // parameter check\n                    if (!queryMethod || !queryURL || !queryAccept || !queryData || !successCallback) {\n                        return this.ERROR_PARAMETER_MISSING;\n                    }\n                    // ajax request configure\n                    var that = this,\n                        queryObject = {\n                        type: queryMethod,\n                        url: queryURL,\n                        dataType: queryAccept,\n                        data: queryData,\n                        success: successCallback,\n                        error: failCallback\n                    };\n                    var ajaxRequest = function () {\n                        //activeX versions to check for in IE\n                        var activeXModes = [\"Msxml2.XMLHTTP\", \"Microsoft.XMLHTTP\"]; //activeX versions to check for in IE\n                        for (var i = 0, max = activeXModes.length; i < max; i += 1) {\n                            try {\n                                return new ActiveXObject(activeXModes[i]);\n                            } catch (e) {\n                                //suppress error\n                                return null;\n                            }\n                        }\n                    };\n                    var myGetRequest;\n                    // default error handling function\n                    if (!failCallback) {\n                        queryObject.error = function (jqXHR, textStatus, errorThrown) {\n                            if (this.isIE) {\n                                alert(\"Ajax fail callback is called\");\n                            }\n                            if (jqXHR.status === 0) {\n                                alert(\"jqXHR.status 0: Network Problem\");\n                            } else if (jqXHR.status === 401) {\n                                alert(\"jqXHR.status 401: Unauthorized\");\n                                // location.href = \"https://developers.skplanetx.com/login/\";\n                            } else if (jqXHR.status === 403) {\n                                    alert(\"jqXHR.status 403: Forbidden\");\n                                } else if (jqXHR.status === 404) {\n                                    alert(\"jqXHR.status 404: Not Found\");\n                                } else if (jqXHR.status === 406) {\n                                    alert(\"jqXHR.status 406: Not Acceptable\");\n                                } else if (jqXHR.status === 412) {\n                                    alert(\"jqXHR.status 412: Precondition Failed \");\n                                } else if (jqXHR.status === 500) {\n                                    alert(\"jqXHR.status 500: Internal Server Error \");\n                                } else {\n                                    alert(\"jqXHR.status \" + jqXHR.status);\n                                }\n                        };\n                    }\n                    // defualt setting for ajax request\n                    var defaultSetting = {\n                        beforeSend: function (xhr) {\n                            xhr.setRequestHeader(\"appKey\", that._getAppkey());\n                        },\n                        data: {\n                            \"version\": 1\n                        },\n                        cache: false\n                    };\n                    // public API doesn't have accessToken ...\n                    if (that._getAccessToken() !== \"\") {\n                        defaultSetting.data.access_token = that._getAccessToken();\n                    }\n                    // merging queryObject with defaultSetting object\n                    $.extend(true, queryObject, defaultSetting);\n                    // user setting\n                    if (!!userSetting) {\n                        $.extend(true, queryObject, userSetting);\n                    }\n                    // Use Microsoft XDR for IE browser\n                    if (this.isIE) {\n                        myGetRequest = new ajaxRequest();\n                        myGetRequest.onreadystatechange = function () {\n                            if (myGetRequest.readyState === 4) {\n                                if (myGetRequest.status === 200 || window.location.href.indexOf(\"http\") === -1) {\n                                    if (!myGetRequest.responseType || myGetRequest.responseType === \"JSON\" || myGetRequest.responseType === \"json\") {\n                                        successCallback(jQuery.parseJSON(myGetRequest.responseText));\n                                    } else if (myGetRequest.responseType === \"XML\" || myGetRequest.responseType === \"xml\") {\n                                        successCallback(jQuery.parseXML(myGetRequest.responseText));\n                                    }\n                                } else {\n                                    if (failCallback) {\n                                        failCallback();\n                                    }\n                                }\n                            }\n                        };\n                        // get\n                        if (queryMethod === \"GET\" || queryMethod === \"get\") {\n                            try {\n                                myGetRequest.open(queryMethod, queryURL + \"?\" + jQuery.param(queryData), true);\n                            } catch (e) {\n                                alert(\"브라우저가 AJAX를 지원하지 않습니다. !\\n인터넷 옵션->보안->사용자 지정 수준->도메인간 데이터 원본 엑세스->확인 혹은 사용으로 활성화해주세요\");\n                                return false;\n                            }\n                        } else if (queryMethod === \"POST\" || queryMethod === \"post\") {\n                            myGetRequest.open(queryMethod, queryURL, true);\n                        }\n                        myGetRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\n                        myGetRequest.setRequestHeader('appkey', that._getAppkey());\n                        // get\n                        if (queryMethod === \"GET\" || queryMethod === \"get\") {\n                            myGetRequest.send(null);\n                        } else if (queryMethod === \"POST\" || queryMethod === \"post\") {\n                            // post\n                            myGetRequest.send(jQuery.param(queryData));\n                        }\n                    } else {\n                        // other browsers except IE browser ...\n                        $.ajax(queryObject);\n                    }\n                    return this.SUCCESS_API;\n                } //end api\n            }; // end of prototype\n            // assign PlanetX object to window object\n            window.PlanetX = new PlanetX();\n        })(jQuery, window));\n    });\n}","ast":null,"map":{"version":3,"sources":["/lib/melon.js"],"names":[],"mappings":"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","file":"/lib/melon.js.map","sourcesContent":["if(Meteor.isClient){\r\n    Meteor.startup(function(){\r\n        $(document).ready(function ( $, window, undefined ) {\r\n            var doc = document;\r\n            var PlanetX = function( ) {\r\n                // you can configure these variables using PlanetX.init() function\r\n                this.isIE = (/MSIE/i).test( navigator.userAgent );\r\n                this.appkey = \"\" ;\r\n                // <form> tag id for OAuth 2.0 request\r\n                this.login_form = null ;\r\n                this.client_id = \"\";\r\n                this.response_type = \"token\";\r\n                this.scope = \"\";\r\n                this.redirect_uri = \"\";\r\n                // saving token in cookie or localstorage\r\n                // default is true\r\n                this.savingToken = true;\r\n                // access token\r\n                this._access_token = \"\";\r\n                this._access_token_start = 14;\r\n                this._access_token_end = 50;\r\n                this._access_token_time = null ;\r\n                this._access_token_time_limit = 43195;\r\n                // login status\r\n                this._loginStatus = false;\r\n                // check whether this web app (or web page) already has access token or not.\r\n                this._checkAccessToken();\r\n            };\r\n            // prototype\r\n            PlanetX.prototype = {\r\n                // System information\r\n                versionNumber: '1.1.0',\r\n                // Return code\r\n                SUCCESS_INIT: 100,\r\n                SUCCESS_LOGIN: 101,\r\n                SUCCESS_LOGOUT: 102,\r\n                SUCCESS_API: 200,\r\n                ERROR_INIT: -100 ,\r\n                ERROR_LOGIN: -101 ,\r\n                ERROR_LOGOUT: -102 ,\r\n                ERROR_PARAMETER_MISSING: -201 ,\r\n                /**\r\n                 * @function init\r\n                 */\r\n                init: function ( obj ) {\r\n\r\n                    var i,\r\n                        that = this,\r\n                        typeAttr,\r\n                        nameAttr,\r\n                        valueAttr,\r\n                        body = doc.getElementsByTagName( \"body\" )[0];\r\n\r\n                    // first call\r\n                    if ( this.login_form === null ){\r\n                        // initializing with object parameter\r\n                        if ( !! obj ) {\r\n                            for ( i in obj ) {\r\n                                this[i] = obj[i];\r\n                            }\r\n                        }\r\n                        // making new <form> tag\r\n                        this.login_form = doc.createElement( \"form\" );\r\n                        this.login_form.action = \"https://oneid.skplanetx.com/oauth/authorize\";\r\n                        this.login_form.method = \"get\";\r\n                        // making <input> tags and their attributes in <form> tag\r\n                        jQuery.each( [ \"client_id\", \"response_type\", \"scope\", \"redirect_uri\" ], function(i, name){\r\n                            node = doc.createElement( \"input\" );\r\n                            // making new attributes\r\n                            typeAttr = doc.createAttribute( \"type\" );\r\n                            nameAttr = doc.createAttribute( \"name\" );\r\n                            valueAttr = doc.createAttribute( \"value\" );\r\n                            // setting attribute values\r\n                            typeAttr.value = \"hidden\";\r\n                            nameAttr.value = name;\r\n                            valueAttr.value = that[ name ];\r\n                            // attaching attributes to <input> tag\r\n                            node.setAttributeNode( typeAttr );\r\n                            node.setAttributeNode( nameAttr );\r\n                            node.setAttributeNode( valueAttr );\r\n                            // attaching <input> tag to <form> tag\r\n                            that.login_form.appendChild( node );\r\n                        });\r\n                        body.appendChild( this.login_form );\r\n                        return this.SUCCESS_INIT;\r\n                    }\r\n                    // can't call twice\r\n                    else {\r\n                        return this.ERROR_INIT;\r\n                    }\r\n                },\r\n                /**\r\n                 * @function login\r\n                 */\r\n                login: function ( ) {\r\n                    // if existing <form> tag for log-in\r\n                    if ( this.login_form !== null ) {\r\n                        this.login_form.submit( );\r\n                        return this.SUCCESS_LOGIN;\r\n                    } else {\r\n                        return this.ERROR_LOGIN;\r\n                    }\r\n                },\r\n                /**\r\n                 * @function logout\r\n                 */\r\n                logout: function ( successCB, failCB ) {\r\n\r\n                    if ( this.getLoginStatus() === false ) {\r\n                        return this.ERROR_LOGOUT;\r\n                    }\r\n\r\n                    // ajax JSONP call for invalidating access_token\r\n                    $.ajax( {\r\n                        beforeSend: function(xhr) {\r\n                            xhr.setRequestHeader( \"appKey\", this._getAppkey( ) );\r\n                        },\r\n                        type: \"get\",\r\n                        url: \"https://oneid.skplanetx.com/oauth/expireToken_jsonp\",\r\n                        data:  {\r\n                            \"client_id\": this.client_id,\r\n                            \"token\": this._getAccessToken( )\r\n                        },\r\n                        dataType: \"jsonp\",\r\n                        context: this,\r\n                        callback: \"this.logoutCallback\"\r\n                    }).done( function ( data ) {\r\n                        if ( data.app.result === \"success\") {\r\n                            this._clearToken();\r\n                            this._loginStatus = false;\r\n                            window.location.hash = '';\r\n                            if ( typeof successCB === 'function') {\r\n                                successCB();\r\n                            }\r\n                            return this.SUCCESS_LOGOUT;\r\n                        }\r\n                        else {\r\n                            alert( 'response for the logout-request is not success');\r\n                            return this.ERROR_LOGOUT;\r\n                        }\r\n                    }).fail( function(jqXHR, textStatus, errorThrown){\r\n\r\n                        // error handling\r\n                        if (jqXHR.status === 0) {\r\n                            alert(\"error 0: Network Problem\");\r\n                        } else if (jqXHR.status === 401) {\r\n                            alert(\"error 401: Unauthorized\");\r\n                            location.href = \"https://developers.skplanetx.com/login/\";\r\n                        } else if (jqXHR.status === 403) {\r\n                            alert(\"error 403: Forbidden\");\r\n                        } else if (jqXHR.status === 404) {\r\n                            alert(\"error 404: Not Found\");\r\n                        } else if (jqXHR.status === 406) {\r\n                            alert(\"error 406: Not acceptable\");\r\n                        } else if (jqXHR.status === 412) {\r\n                            alert(\"error 412: Precondition Failed \");\r\n                        } else if (jqXHR.status === 500) {\r\n                            alert(\"error 500: Internal Server Error\");\r\n                        } else {\r\n                            alert(\"error \" + jqXHR.status );\r\n                        }\r\n                        if ( typeof failCB === 'function') {\r\n                            failCB();\r\n                        }\r\n                        return this.ERROR_LOGOUT;\r\n                    });\r\n                },\r\n                /**\r\n                 * @function getLoginStatus\r\n                 */\r\n                getLoginStatus: function ( ) {\r\n                    return this._loginStatus;\r\n                },\r\n                /**\r\n                 * @function logoutCallback\r\n                 */\r\n                logoutCallback: function ( data ) {\r\n                    // not yet in the server-side\r\n                },\r\n                /**\r\n                 * @function _setAppkey\r\n                 */\r\n                _setAppkey: function ( appkey ) {\r\n                    this.appkey = appkey;\r\n                },\r\n                /**\r\n                 * @function _getAppkey\r\n                 */\r\n                _getAppkey: function ( ) {\r\n                    return this.appkey;\r\n                },\r\n                /**\r\n                 * @function _saveToken\r\n                 */\r\n                _saveToken: function ( token ) {\r\n                    // when you don't want to save token in cookie or localstorage\r\n                    // ex) one page application\r\n                    if ( this.savingToken === false ) {\r\n                        return;\r\n                    }\r\n\r\n                    var current_time = new Date();\r\n                    this._access_token_time = current_time.getTime() / 1000 ;\r\n                    // first check window.localStorage\r\n                    if ( window.localStorage ){\r\n                        localStorage.setItem ( \"token\", token );\r\n                        localStorage.setItem ( \"tokentime\", this._access_token_time );\r\n                    }\r\n                    // second check cookie\r\n                    else {\r\n                        doc.cookie += (\"token=\" + token + \";\" ) ;\r\n                        doc.cookie += ( \"tokentime=\"  + this._access_token_time + \";\" ) ;\r\n                    }\r\n                },\r\n\r\n                /**\r\n                 * @function _loadToken\r\n                 */\r\n                _loadToken: function ( ){\r\n\r\n                    // when you don't want to save token in cookie or localstorage\r\n                    // ex) one page application\r\n                    if ( this.savingToken === false ) {\r\n                        return;\r\n                    }\r\n\r\n                    // first check window.localStorage\r\n                    if ( window.localStorage ){\r\n                        this._access_token = localStorage.getItem( \"token\" );\r\n                        this._access_token_time = localStorage.getItem( \"tokentime\" );\r\n\r\n                    }\r\n                    // second check cookie\r\n                    else {\r\n                        var cookieArray = doc.cookie.split( \";\" );\r\n                        for ( var i in cookieArray ) {\r\n                            if ( cookieArray[i].match( \"token=\" ) ) {\r\n                                this._access_token = cookieArray[i].substr( cookieArray[i].indexOf( \"=\" )+1 );\r\n                            } else if ( cookieArray[i].match( \"tokentime=\" ) ) {\r\n                                this._access_token_time = cookieArray[i].substr( cookieArray[i].indexOf( \"=\" )+1 );\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    // token validation check\r\n                    var current_date = new Date();\r\n                    current_time = current_date.getTime() / 1000 ;\r\n                    if ( !this._access_token || !this._access_token_time || ( this._access_token_time_limit - ( current_time - this._access_token_time ) ) < 0 ) {\r\n                        this._clearToken();\r\n                        this._loginStatus = false;\r\n                    } else if ( !!this._access_token && !!this._access_token_time ) {\r\n                        this._loginStatus = true;\r\n                    }\r\n                },\r\n                /**\r\n                 * @function _clearToken\r\n                 */\r\n                _clearToken: function () {\r\n                    this._access_token = \"\";\r\n                    this._access_token_time = \"\";\r\n\r\n                    // when you don't want to save token in cookie or localstorage\r\n                    // ex) one page application\r\n                    if ( this.savingToken === false ) {\r\n                        return;\r\n                    }\r\n\r\n                    // first remove window.localStorage\r\n                    if ( window.localStorage ) {\r\n                        localStorage.removeItem( \"token\" );\r\n                        localStorage.removeItem( \"tokentime\" );\r\n                    }\r\n                    // second check cookie\r\n                    else {\r\n                        this._saveToken( \"\" );\r\n                    }\r\n                },\r\n                /**\r\n                 * @function _checkAccessToken\r\n                 */\r\n                _checkAccessToken: function () {\r\n                    // get access token from local storage or cookie\r\n                    this._loadToken( );\r\n                    // get access token from location.hash , this value has higher priority.\r\n                    if ( window.location.hash ) {\r\n                        var hashString = window.location.hash.substring(1),\r\n                            pattern = /^access_token/,\r\n                            result = hashString.match( pattern );\r\n                        if ( result !== null ) {\r\n                            this._access_token = window.location.hash.slice( this._access_token_start, this._access_token_end );\r\n                            this._saveToken( this._access_token );\r\n                            this._loginStatus = true;\r\n                        }\r\n                    }\r\n                },\r\n                /**\r\n                 * @function _getAccessToken\r\n                 */\r\n                _getAccessToken: function () {\r\n                    return this._access_token;\r\n                },\r\n                /**\r\n                 * @function api\r\n                 */\r\n                api: function ( queryMethod, queryURL, queryAccept, queryData, successCallback, failCallback, userSetting ) {\r\n                    // parameter check\r\n                    if ( !queryMethod || !queryURL || !queryAccept || !queryData || !successCallback ) {\r\n                        return this.ERROR_PARAMETER_MISSING;\r\n                    }\r\n                    // ajax request configure\r\n                    var that = this,\r\n                        queryObject = {\r\n                            type: queryMethod,\r\n                            url: queryURL,\r\n                            dataType: queryAccept,\r\n                            data: queryData,\r\n                            success: successCallback,\r\n                            error: failCallback\r\n                        };\r\n                    var ajaxRequest = function( ) {\r\n                        //activeX versions to check for in IE\r\n                        var activeXModes=[\"Msxml2.XMLHTTP\", \"Microsoft.XMLHTTP\"]; //activeX versions to check for in IE\r\n                        for ( var i = 0, max = activeXModes.length; i < max; i += 1 ){\r\n                            try{\r\n                                return new ActiveXObject(activeXModes[i]);\r\n                            } catch(e){\r\n                                //suppress error\r\n                                return null;\r\n                            }\r\n                        }\r\n                    };\r\n                    var myGetRequest;\r\n                    // default error handling function\r\n                    if ( !failCallback ) {\r\n                        queryObject.error =  function(jqXHR, textStatus, errorThrown){\r\n                            if ( this.isIE ) {\r\n                                alert(\"Ajax fail callback is called\");\r\n                            }\r\n                            if (jqXHR.status === 0 ) {\r\n                                alert(\"jqXHR.status 0: Network Problem\");\r\n                            } else if (jqXHR.status === 401) {\r\n                                alert(\"jqXHR.status 401: Unauthorized\");\r\n                                // location.href = \"https://developers.skplanetx.com/login/\";\r\n                            } else if (jqXHR.status === 403) {\r\n                                alert(\"jqXHR.status 403: Forbidden\");\r\n                            } else if (jqXHR.status === 404) {\r\n                                alert(\"jqXHR.status 404: Not Found\");\r\n                            } else if (jqXHR.status === 406) {\r\n                                alert(\"jqXHR.status 406: Not Acceptable\");\r\n                            } else if (jqXHR.status === 412) {\r\n                                alert(\"jqXHR.status 412: Precondition Failed \");\r\n                            } else if (jqXHR.status === 500) {\r\n                                alert(\"jqXHR.status 500: Internal Server Error \");\r\n                            } else {\r\n                                alert(\"jqXHR.status \" + jqXHR.status );\r\n                            }\r\n                        };\r\n                    }\r\n                    // defualt setting for ajax request\r\n                    var defaultSetting = {\r\n                        beforeSend: function(xhr) {\r\n                            xhr.setRequestHeader( \"appKey\", that._getAppkey( ) );\r\n                        },\r\n                        data: {\r\n                            \"version\": 1\r\n                        },\r\n                        cache: false\r\n                    };\r\n                    // public API doesn't have accessToken ...\r\n                    if ( that._getAccessToken() !== \"\" ) {\r\n                        defaultSetting.data.access_token = that._getAccessToken( );\r\n                    }\r\n                    // merging queryObject with defaultSetting object\r\n                    $.extend(  true, queryObject, defaultSetting );\r\n                    // user setting\r\n                    if ( !!userSetting ) {\r\n                        $.extend(  true, queryObject, userSetting );\r\n                    }\r\n                    // Use Microsoft XDR for IE browser\r\n                    if ( this.isIE ) {\r\n                        myGetRequest = new ajaxRequest();\r\n                        myGetRequest.onreadystatechange = function() {\r\n                            if (myGetRequest.readyState === 4){\r\n                                if ( myGetRequest.status === 200 || window.location.href.indexOf( \"http\" ) === -1 ){\r\n                                    if ( !myGetRequest.responseType || myGetRequest.responseType === \"JSON\" || myGetRequest.responseType === \"json\" ) {\r\n                                        successCallback( jQuery.parseJSON( myGetRequest.responseText ) );\r\n                                    } else if ( myGetRequest.responseType === \"XML\" || myGetRequest.responseType === \"xml\" ) {\r\n                                        successCallback( jQuery.parseXML( myGetRequest.responseText ) );\r\n                                    }\r\n                                } else{\r\n                                    if ( failCallback ) {\r\n                                        failCallback();\r\n                                    }\r\n                                }\r\n                            }\r\n                        };\r\n                        // get\r\n                        if ( queryMethod === \"GET\" || queryMethod === \"get\") {\r\n                            try {\r\n                                myGetRequest.open( queryMethod, queryURL + \"?\" + jQuery.param( queryData ), true );\r\n                            } catch (e) {\r\n                                alert( \"브라우저가 AJAX를 지원하지 않습니다. !\\n인터넷 옵션->보안->사용자 지정 수준->도메인간 데이터 원본 엑세스->확인 혹은 사용으로 활성화해주세요\");\r\n                                return false;\r\n                            }\r\n                        } else if ( queryMethod === \"POST\" || queryMethod === \"post\" ) {\r\n                            myGetRequest.open( queryMethod, queryURL , true);\r\n                        }\r\n                        myGetRequest.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n                        myGetRequest.setRequestHeader('appkey', that._getAppkey() );\r\n                        // get\r\n                        if ( queryMethod === \"GET\" || queryMethod === \"get\") {\r\n                            myGetRequest.send(null);\r\n                        } else if ( queryMethod === \"POST\" || queryMethod === \"post\") { // post\r\n                            myGetRequest.send( jQuery.param( queryData ) );\r\n                        }\r\n                    } else { // other browsers except IE browser ...\r\n                        $.ajax( queryObject );\r\n                    }\r\n                    return this.SUCCESS_API;\r\n                } //end api\r\n            }; // end of prototype\r\n            // assign PlanetX object to window object\r\n            window.PlanetX = new PlanetX( );\r\n\r\n        }( jQuery, window ));\r\n    });\r\n}\r\n\r\n\r\n\r\n"]},"hash":"005b18262c638942d1bc8decc6a24719dbec806a"}
